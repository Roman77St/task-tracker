# üöÄ Task Tracker API & Telegram Bot

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏ —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –≤ Telegram –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –Ω–∞ –±–∞–∑–µ JWT –∏ Redis.

---

## üõ† –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
* **Language:** Go 1.25+
* **Database:** PostgreSQL (–æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∑–∞–¥–∞—á)
* **Caching & Auth:** Redis (OTP-–∫–æ–¥—ã, —Å–µ—Å—Å–∏–∏, JWT Blacklist)
* **Bot API:** Telebot (–¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ 2FA)
* **Deployment:** Docker & Docker Compose

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–°–∏—Å—Ç–µ–º–∞ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –Ω–∞–¥–µ–∂–Ω—ã–π —Ü–∏–∫–ª –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:
1. **Telegram 2FA**: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤ Telegram-–±–æ—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 6-–∑–Ω–∞—á–Ω—ã–π OTP –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ –≤ Redis —Å TTL 5 –º–∏–Ω—É—Ç.
2. **JWT Dual Tokens**: –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞ API –≤—ã–¥–∞–µ—Ç `Access Token` (–∫–æ—Ä–æ—Ç–∫–∏–π —Å—Ä–æ–∫ –∂–∏–∑–Ω–∏) –∏ `Refresh Token` (—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ Redis).
3. **Refresh Token Rotation**: –ü—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤ —Å—Ç–∞—Ä—ã–π Refresh-—Ç–æ–∫–µ–Ω –∞–Ω–Ω—É–ª–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∞—Ç–∞–∫–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è.
4. **Instant Logout**: –ü—Ä–∏ –≤—ã—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Access-—Ç–æ–∫–µ–Ω –ø–æ–ø–∞–¥–∞–µ—Ç –≤ Blacklist –≤ Redis –¥–æ –∫–æ–Ω—Ü–∞ —Å–≤–æ–µ–≥–æ —Å—Ä–æ–∫–∞ –∂–∏–∑–Ω–∏, –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –±–ª–æ–∫–∏—Ä—É—è –¥–æ—Å—Ç—É–ø.

---

## ü§ñ –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –±–æ—Ç–æ–º

1. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞: `https://t.me/YourBotName`
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.
3. –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ API, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/login`.
4. **–í–∞—à User ID:** –ë–æ—Ç —Å–æ–æ–±—â–∏—Ç –≤–∞—à ID (–µ–≥–æ —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å —á–µ—Ä–µ–∑ `@userinfobot`).
5. –í–≤–µ–¥–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –¥–ª—è –≤—Ö–æ–¥–∞.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (Docker)

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```env
DB_URL=postgres://user:pass@db:5432/taskdb?sslmode=disable
REDIS_ADDR=redis:6379
JWT_SECRET=your_super_secret_key
BOT_TOKEN=your_telegram_bot_token
```

### 2. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
```Bash
docker-compose up -d --build
```

---

## üì° API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã
**Auth**

* `POST /auth/login` ‚Äî –û–±–º–µ–Ω OTP –Ω–∞ –ø–∞—Ä—É —Ç–æ–∫–µ–Ω–æ–≤.
* `POST /auth/refresh` ‚Äî –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Access —Ç–æ–∫–µ–Ω–∞.
* `POST /auth/logout` ‚Äî –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–µ—Å—Å–∏–∏ (—Ç—Ä–µ–±—É–µ—Ç Auth Header).

**Tasks**

* `GET /tasks` ‚Äî –°–ø–∏—Å–æ–∫ –≤–∞—à–∏—Ö –∑–∞–¥–∞—á.
* `POST /tasks` ‚Äî –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏.
* `DELETE /tasks/{id}` ‚Äî –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –ø–æ–∫—Ä—ã—Ç Unit-—Ç–µ—Å—Ç–∞–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º miniredis (—ç–º—É–ª—è—Ü–∏—è Redis –≤ –ø–∞–º—è—Ç–∏) –∏ testify.
```Bash
go test ./internal/service/...
```

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

Distributed under the MIT License. See `LICENSE` for more information.